<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>The Synch framework: mcs.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_synch.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">The Synch framework
   &#160;<span id="projectnumber">v3.0.0</span>
   </div>
   <div id="projectbrief">An open-source framework for concurrent data-structures and benchmarks</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bba3cddd56565a95b77b098fd409d0ab.html">libconcurrent</a></li><li class="navelem"><a class="el" href="dir_3b0504cce330a6e867091f76f8160def.html">includes</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mcs.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file exposes the API of the MCS queue locks. An example of use of this API is provided in benchmarks/mcsbench.c file.  
<a href="#details">More...</a></p>

<p><a href="mcs_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structSynchHalfMCSLockNode"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcs_8h.html#structSynchHalfMCSLockNode">SynchHalfMCSLockNode</a></td></tr>
<tr class="memdesc:structSynchHalfMCSLockNode"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="mcs_8h.html#structSynchHalfMCSLockNode" title="SynchHalfMCSLockNode should not be directly used by the user. It is internally used for proper alignm...">SynchHalfMCSLockNode</a> should not be directly used by the user. It is internally used for proper alignment of the <a class="el" href="mcs_8h.html#structSynchMCSLockNode" title="SynchMCSLockNode used for announcing that a thread wants to acquire the lock.">SynchMCSLockNode</a> struct.  <a href="mcs_8h.html#structSynchHalfMCSLockNode">More...</a><br /></td></tr>
<tr class="separator:structSynchHalfMCSLockNode"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structSynchMCSLockNode"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcs_8h.html#structSynchMCSLockNode">SynchMCSLockNode</a></td></tr>
<tr class="memdesc:structSynchMCSLockNode"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="mcs_8h.html#structSynchMCSLockNode" title="SynchMCSLockNode used for announcing that a thread wants to acquire the lock.">SynchMCSLockNode</a> used for announcing that a thread wants to acquire the lock.  <a href="mcs_8h.html#structSynchMCSLockNode">More...</a><br /></td></tr>
<tr class="separator:structSynchMCSLockNode"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structSynchMCSLockStruct"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcs_8h.html#structSynchMCSLockStruct">SynchMCSLockStruct</a></td></tr>
<tr class="memdesc:structSynchMCSLockStruct"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="mcs_8h.html#structSynchMCSLockStruct" title="SynchMCSLockStruct stores the state of an instance of the MCS queue lock implementation....">SynchMCSLockStruct</a> stores the state of an instance of the MCS queue lock implementation. <a class="el" href="mcs_8h.html#structSynchMCSLockStruct" title="SynchMCSLockStruct stores the state of an instance of the MCS queue lock implementation....">SynchMCSLockStruct</a> should be initialized using the synchMCSLockInit function.  <a href="mcs_8h.html#structSynchMCSLockStruct">More...</a><br /></td></tr>
<tr class="separator:structSynchMCSLockStruct"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structSynchMCSThreadState"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcs_8h.html#structSynchMCSThreadState">SynchMCSThreadState</a></td></tr>
<tr class="memdesc:structSynchMCSThreadState"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="mcs_8h.html#structSynchMCSThreadState" title="SynchMCSThreadState stores the state of a thread&#39;s local instance of the MCS queue lock implementatio...">SynchMCSThreadState</a> stores the state of a thread's local instance of the MCS queue lock implementation. <a class="el" href="mcs_8h.html#structSynchMCSThreadState" title="SynchMCSThreadState stores the state of a thread&#39;s local instance of the MCS queue lock implementatio...">SynchMCSThreadState</a> should be initialized using the synchMCSThreadStateInit function.  <a href="mcs_8h.html#structSynchMCSThreadState">More...</a><br /></td></tr>
<tr class="separator:structSynchMCSThreadState"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1e0c0479ae08789fb530fb11f317f32a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mcs_8h.html#structSynchMCSLockStruct">SynchMCSLockStruct</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcs_8h.html#a1e0c0479ae08789fb530fb11f317f32a">synchMCSLockInit</a> (void)</td></tr>
<tr class="memdesc:a1e0c0479ae08789fb530fb11f317f32a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initializes an instance of the MCS queue lock implementation.  <a href="mcs_8h.html#a1e0c0479ae08789fb530fb11f317f32a">More...</a><br /></td></tr>
<tr class="separator:a1e0c0479ae08789fb530fb11f317f32a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba6db676c9682b1f35a1eb20d4e454de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcs_8h.html#aba6db676c9682b1f35a1eb20d4e454de">synchMCSThreadStateInit</a> (<a class="el" href="mcs_8h.html#structSynchMCSThreadState">SynchMCSThreadState</a> *st_thread, int pid)</td></tr>
<tr class="memdesc:aba6db676c9682b1f35a1eb20d4e454de"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function should be called once before the thread applies any operation to the MCS queue lock.  <a href="mcs_8h.html#aba6db676c9682b1f35a1eb20d4e454de">More...</a><br /></td></tr>
<tr class="separator:aba6db676c9682b1f35a1eb20d4e454de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fa2c60aa7032b947acf6811d409d62e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcs_8h.html#a3fa2c60aa7032b947acf6811d409d62e">synchMCSLock</a> (<a class="el" href="mcs_8h.html#structSynchMCSLockStruct">SynchMCSLockStruct</a> *l, <a class="el" href="mcs_8h.html#structSynchMCSThreadState">SynchMCSThreadState</a> *thread_state, int pid)</td></tr>
<tr class="memdesc:a3fa2c60aa7032b947acf6811d409d62e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns if the lock is available and the calling thread successfully acquires it. In case that the lock is already locked by another thread, the calling thread shall block until the lock becomes available (unlocked) and the calling thread successfully acquires it.  <a href="mcs_8h.html#a3fa2c60aa7032b947acf6811d409d62e">More...</a><br /></td></tr>
<tr class="separator:a3fa2c60aa7032b947acf6811d409d62e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdc8f3276c2ad5a5dcd4783af39722bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcs_8h.html#afdc8f3276c2ad5a5dcd4783af39722bb">synchMCSUnlock</a> (<a class="el" href="mcs_8h.html#structSynchMCSLockStruct">SynchMCSLockStruct</a> *l, <a class="el" href="mcs_8h.html#structSynchMCSThreadState">SynchMCSThreadState</a> *thread_state, int pid)</td></tr>
<tr class="memdesc:afdc8f3276c2ad5a5dcd4783af39722bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function makes the lock available (unlocked).  <a href="mcs_8h.html#afdc8f3276c2ad5a5dcd4783af39722bb">More...</a><br /></td></tr>
<tr class="separator:afdc8f3276c2ad5a5dcd4783af39722bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file exposes the API of the MCS queue locks. An example of use of this API is provided in benchmarks/mcsbench.c file. </p>
<p>For a more detailed description see the following publication: John M. Mellor-Crummey, and Michael L. Scott. "Algorithms for scalable synchronization on shared-memory multiprocessors". ACM Transactions on Computer Systems (TOCS) 9.1 (1991): 21-65. </p>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structSynchHalfMCSLockNode" id="structSynchHalfMCSLockNode"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structSynchHalfMCSLockNode">&#9670;&nbsp;</a></span>SynchHalfMCSLockNode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct SynchHalfMCSLockNode</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p><a class="el" href="mcs_8h.html#structSynchHalfMCSLockNode" title="SynchHalfMCSLockNode should not be directly used by the user. It is internally used for proper alignm...">SynchHalfMCSLockNode</a> should not be directly used by the user. It is internally used for proper alignment of the <a class="el" href="mcs_8h.html#structSynchMCSLockNode" title="SynchMCSLockNode used for announcing that a thread wants to acquire the lock.">SynchMCSLockNode</a> struct. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a725d918b92dd0d995536f9d49c37a2e1"></a>volatile bool</td>
<td class="fieldname">
locked</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a026938445a8c072a76622aa6fc1a3f62"></a>volatile struct <a class="el" href="mcs_8h.html#structSynchMCSLockNode">SynchMCSLockNode</a> *</td>
<td class="fieldname">
next</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="structSynchMCSLockNode" id="structSynchMCSLockNode"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structSynchMCSLockNode">&#9670;&nbsp;</a></span>SynchMCSLockNode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct SynchMCSLockNode</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p><a class="el" href="mcs_8h.html#structSynchMCSLockNode" title="SynchMCSLockNode used for announcing that a thread wants to acquire the lock.">SynchMCSLockNode</a> used for announcing that a thread wants to acquire the lock. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="ac4d44b2ea05c1ce7cb0ce81e8144f797"></a>volatile bool</td>
<td class="fieldname">
locked</td>
<td class="fielddoc">
This is true whenever a thread executes synchMCSLock and waits until it acquires the lock. </td></tr>
<tr><td class="fieldtype">
<a id="ac067dd53cfaa6b3c743ba69c2c0f7227"></a>volatile struct <a class="el" href="mcs_8h.html#structSynchMCSLockNode">SynchMCSLockNode</a> *</td>
<td class="fieldname">
next</td>
<td class="fielddoc">
Pointer to the next thread that wants to enter to the critical section. </td></tr>
<tr><td class="fieldtype">
<a id="a8d73206e3e258dcd618b5d38ca4d1c05"></a>char</td>
<td class="fieldname">
pad[PAD_CACHE(sizeof(<a class="el" href="mcs_8h.html#structSynchHalfMCSLockNode">SynchHalfMCSLockNode</a>))]</td>
<td class="fielddoc">
Padding space. </td></tr>
</table>

</div>
</div>
<a name="structSynchMCSLockStruct" id="structSynchMCSLockStruct"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structSynchMCSLockStruct">&#9670;&nbsp;</a></span>SynchMCSLockStruct</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct SynchMCSLockStruct</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p><a class="el" href="mcs_8h.html#structSynchMCSLockStruct" title="SynchMCSLockStruct stores the state of an instance of the MCS queue lock implementation....">SynchMCSLockStruct</a> stores the state of an instance of the MCS queue lock implementation. <a class="el" href="mcs_8h.html#structSynchMCSLockStruct" title="SynchMCSLockStruct stores the state of an instance of the MCS queue lock implementation....">SynchMCSLockStruct</a> should be initialized using the synchMCSLockInit function. </p>
</div>
</div>
</div>
<a name="structSynchMCSThreadState" id="structSynchMCSThreadState"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structSynchMCSThreadState">&#9670;&nbsp;</a></span>SynchMCSThreadState</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct SynchMCSThreadState</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p><a class="el" href="mcs_8h.html#structSynchMCSThreadState" title="SynchMCSThreadState stores the state of a thread&#39;s local instance of the MCS queue lock implementatio...">SynchMCSThreadState</a> stores the state of a thread's local instance of the MCS queue lock implementation. <a class="el" href="mcs_8h.html#structSynchMCSThreadState" title="SynchMCSThreadState stores the state of a thread&#39;s local instance of the MCS queue lock implementatio...">SynchMCSThreadState</a> should be initialized using the synchMCSThreadStateInit function. </p>
</div>
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1e0c0479ae08789fb530fb11f317f32a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e0c0479ae08789fb530fb11f317f32a">&#9670;&nbsp;</a></span>synchMCSLockInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mcs_8h.html#structSynchMCSLockStruct">SynchMCSLockStruct</a>* synchMCSLockInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initializes an instance of the MCS queue lock implementation. </p>
<p>This function should be called once (by a single thread) before any other thread tries to use either synchMCSLock or synchMCSUnlock. </p>

</div>
</div>
<a id="aba6db676c9682b1f35a1eb20d4e454de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba6db676c9682b1f35a1eb20d4e454de">&#9670;&nbsp;</a></span>synchMCSThreadStateInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void synchMCSThreadStateInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mcs_8h.html#structSynchMCSThreadState">SynchMCSThreadState</a> *&#160;</td>
          <td class="paramname"><em>st_thread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function should be called once before the thread applies any operation to the MCS queue lock. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">st_thread</td><td>A pointer to thread's local state of the MCS queue lock. </td></tr>
    <tr><td class="paramname">pid</td><td>The pid of the calling thread. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3fa2c60aa7032b947acf6811d409d62e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fa2c60aa7032b947acf6811d409d62e">&#9670;&nbsp;</a></span>synchMCSLock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void synchMCSLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mcs_8h.html#structSynchMCSLockStruct">SynchMCSLockStruct</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mcs_8h.html#structSynchMCSThreadState">SynchMCSThreadState</a> *&#160;</td>
          <td class="paramname"><em>thread_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function returns if the lock is available and the calling thread successfully acquires it. In case that the lock is already locked by another thread, the calling thread shall block until the lock becomes available (unlocked) and the calling thread successfully acquires it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>A pointer to an instance of the MCS queue lock. </td></tr>
    <tr><td class="paramname">thread_state</td><td>A pointer to thread's local state of the MCS queue lock. </td></tr>
    <tr><td class="paramname">pid</td><td>The pid of the calling thread. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afdc8f3276c2ad5a5dcd4783af39722bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdc8f3276c2ad5a5dcd4783af39722bb">&#9670;&nbsp;</a></span>synchMCSUnlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void synchMCSUnlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mcs_8h.html#structSynchMCSLockStruct">SynchMCSLockStruct</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mcs_8h.html#structSynchMCSThreadState">SynchMCSThreadState</a> *&#160;</td>
          <td class="paramname"><em>thread_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function makes the lock available (unlocked). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>A pointer to an instance of the MCS queue lock. </td></tr>
    <tr><td class="paramname">thread_state</td><td>A pointer to thread's local state of the MCS queue lock. </td></tr>
    <tr><td class="paramname">pid</td><td>The pid of the calling thread. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
